{% extends 'base.html.twig' %}

{% block title %}Book ad : "{{ ad.title }}" {% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css" />
{% endblock %}

{% block body %}
    <div class="container">
        <h1>Book a room : <strong>{{ ad.title }}</strong></h1>
        <p>You are about to book a room provided by <strong>{{ ad.author.fullName }}</strong>. Tell us what you need, we handle this !</p>

        {{ form_start(form) }}
        <h2>Choose your arrival and departure dates</h2>
        <div class="row bg-light">
            <div class="col">
                {{ form_row(form.startDate) }}
            </div>
            <div class="col">
                {{ form_row(form.endDate) }}
            </div>
        </div>

        <h4>Amount of this booking : <span id="amount">... &euro;</span></h4>
        <span id="days">0</span> night(s) for {{ ad.price }}&euro; / night.

        <h2>Any comment ?</h2>
        {{ form_row(form.comment) }}

        <h2>You are almost done !</h2>
        <p>Best trip ever ? Job trip ? Doesn't matter, we got this !</p>

        <button type="submit" class="btn btn-success btn-lg">Book now !</button>

        {{ form_end(form) }}
    </div>
{% endblock %}

{% block javascripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js">
</script>

<script>
  $(document).ready(function(){
    $('#booking_startDate, #booking_endDate').datepicker({
        format: 'dd/mm/yyyy',
        startDate: new Date(),
        datesDisabled : [
            {% for day in ad.unavailableDays %}
                "{{ day.format('d-m-Y') }}",
            {% endfor %}
        ]
    });
  });
</script>
{% endblock %}